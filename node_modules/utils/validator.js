/**
 * Created by kyle on 19/4/16.
 */

var _ = require('underscore');
var nodeValidator = require('validator');
var validator = {};

_.extend(validator, nodeValidator);

validator.isName = function (value){
    var nameRegex = /^([A-Za-z]{1,10}\s?){1,4}$/;
    return nameRegex.test(value);
};

validator.isUsernameOrEmail = function (value){
    var nameOrEmailRegex = /^[A-Z0-9a-z\._@]{3,}$/;
    return nameOrEmailRegex.test(value);
};

validator.isGender = function (value){
    return ((value === "f") || (value === "m") || (value === "o"));
};

validator.isBirthday = function (value){
    if((!value.day) || (!value.month) || (!value.year)){
        return false;
    }

    if(value.day < 1 && value.day > 31){
        return false;
    }

    if(value.month < 1 && value.month > 12){
        return false;
    }

    var currentTime = new Date();
    if(value.year > currentTime.getFullYear()){
        return false;
    }

    if(value.year < currentTime.getFullYear() - 150){
        return false;
    }

    if(!validator.isDate(value.year + "-" + value.month + "-" + value.day)){
        return false;
    }

    return true;
};

/**
 * Check if image file type supported. Currently supporting Jpeg & Png
 * @param imageFile
 */
validator.isUploadImageTypeSupported = function(imageFile){

    return (imageFile.mimetype === 'image/png' || imageFile.mimetype === 'image/jpeg');

};

module.exports = validator;